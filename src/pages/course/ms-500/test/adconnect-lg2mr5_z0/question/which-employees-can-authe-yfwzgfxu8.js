import {h, Component} from 'preact'
import Page from '../../../../../../components/page'
import {onAuthStateChanged} from '../../../../../../components/firebase/on-auth-state-changed'
import {getDoc} from '../../../../../../components/firebase/get-doc'
import saveDoc from '../../../../../../components/firebase/save-doc'
import Header from '../../../../../../components/test-question/header'
import Footer from '../../../../../../components/test-question/footer'
import Choice from '../../../../../../components/test-question/choice'
import HotArea from '../../../../../../components/test-question/hot-area'
import BuildList from '../../../../../../components/test-question/build-list'
import DragDrop from '../../../../../../components/test-question/drag-drop'
import Container from '@mui/material/Container'
import Grid from '@mui/material/Grid'
import Button from '@mui/material/Button'
import DialogTitle from '@mui/material/DialogTitle'
import Dialog from '@mui/material/Dialog'
import DialogContent from '@mui/material/DialogContent'
import DialogContentText from '@mui/material/DialogContentText'
import DialogActions from '@mui/material/DialogActions'
import Table from '@mui/material/Table'
import TableBody from '@mui/material/TableBody'
import TableCell from '@mui/material/TableCell'
import TableContainer from '@mui/material/TableContainer'
import TableHead from '@mui/material/TableHead'
import TableRow from '@mui/material/TableRow'
import debounce from 'debounce'
import Snackbar from '@mui/material/Snackbar'
import Checkbox from '@mui/material/Checkbox'
import Typography from '@mui/material/Typography'
const clone = require('clone')

const isBrowser = () => typeof window !== 'undefined'

class EditPage extends Component {
  constructor(props) {
    super(props)
    this.setUid = this.setUid.bind(this)
    this.toggleEndExam = this.toggleEndExam.bind(this)
    this.toggleShowAnswer = this.toggleShowAnswer.bind(this)
    this.toggleQuestionList = this.toggleQuestionList.bind(this)
    this.gotoQuestion = this.gotoQuestion.bind(this)
    this.setAnswer = this.setAnswer.bind(this)
    this.beforeUnload = this.beforeUnload.bind(this)
    this.save = this.save.bind(this)
    this.endExam = this.endExam.bind(this)
    this.navigateTo = this.navigateTo.bind(this)

    this.state = {
      bidvHeight: '362px',
      uid: '',
      unsavedChanges: false,
      alert: '',
      answerShown: false,
      showQuestionList: false,
      question: {answerOptions: {gdbyecp1b: {answerHtml: '', answers: {'1wtadwmik': {id: '1wtadwmik', text: 'Only employees who have a synced on-premises account'}, nd6qjhfnd: {id: 'nd6qjhfnd', text: 'Only employees who have an Azure AD user account'}, zhmxdwvhl: {id: 'zhmxdwvhl', text: 'Employees who have an Azure AD user account or a synced on-premises account'}}, id: 'gdbyecp1b', text: 'Which employees can authenticate by using Azure AD?'}, zxoma6vc5: {answerHtml: '', answers: {'-t-rcn-fo': {id: '-t-rcn-fo', text: 'Fix the synchronization server and install Azure AD Connect in staging mode'}, kuqd8vqiv: {id: 'kuqd8vqiv', text: 'Fix the synchronization server and install an additional authentication agent'}, 'tva0md3-h': {id: 'tva0md3-h', text: 'Install Azure AD Connect in staging mode and run the Start-ADSyncSyncCycle cmdlet'}, z2rbhe7oo: {id: 'z2rbhe7oo', text: 'Install an additional authentication agent and run the Start-ADSyncSyncCycle cmdlet'}}, id: 'zxoma6vc5', text: 'What should you do to remove the warning for pass-through authentication?'}}, answerText: 'Fix the synchronization server and install an additional authentication agent. Employees who have an Azure AD user account or a synced on-premises account.', id: 'yfwzgfxu8', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'be9h2', text: 'Your network contains an on-premises Active Directory domain that syncs to Azure Active Directory (Azure AD) as shown in the following exhibit.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 1, offset: 0}], inlineStyleRanges: [], key: '9is0e', text: 'ðŸ“·', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '5rqni', text: 'The synchronization schedule is configured as shown in the following exhibit.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 1, offset: 0}], inlineStyleRanges: [], key: '670vt', text: 'ðŸ“·', type: 'unstyled'}], entityMap: {0: {data: {alt: 'AD Connect Setup', height: 418, src: 'https://i.ibb.co/VpsjVFh/ad-connect-setup.png', width: 651}, mutability: 'IMMUTABLE', type: 'IMAGE'}, 1: {data: {alt: 'AD Connect Scheduler status', height: 298, src: 'https://i.ibb.co/CWcS1NP/ad-connect-status.png', width: 600}, mutability: 'IMMUTABLE', type: 'IMAGE'}}}, questionHtml: '<p>Your network contains an on-premises Active Directory domain that syncs to Azure Active Directory (Azure AD) as shown in the following exhibit.</p>\n<p><img src="https://i.ibb.co/VpsjVFh/ad-connect-setup.png" alt="AD Connect Setup" height="418" width="651" style="aspect-ratio: auto 651 / 418; height: auto;" /></p>\n<p>The synchronization schedule is configured as shown in the following exhibit.</p>\n<p><img src="https://i.ibb.co/CWcS1NP/ad-connect-status.png" alt="AD Connect Scheduler status" height="298" width="600" style="aspect-ratio: auto 600 / 298; height: auto;" /></p>\n', questionText: 'Your network contains an on-premises Active Directory domain that syncs to Azure Active Directory (Azure AD) as shown in the following exhibit. ðŸ“· The synchronization schedule is configured as shown in the following exhibit. ðŸ“·', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ajf1d', text: 'Users that have an Azure AD user account or a synced on-premises account can both authenticate. (Pass-through authentication does not affect cloud-only accounts)', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '1g4md', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ducbm', text: 'The yellow exclamation mark is Microsoft warning you that you should have at least 2 pass-through authentication agents (in case one server fails).', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8j34r', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'b8cp1', text: 'There\'s also an issue with the synchronization server because the last sync time is 4 hours. A sync should run every 30 minutes.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'em8bl', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: '9meg1', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}], entityMap: {0: {data: {url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Users that have an Azure AD user account or a synced on-premises account can both authenticate. (Pass-through authentication does not affect cloud-only accounts)</p>\n<p></p>\n<p>The yellow exclamation mark is Microsoft warning you that you should have at least 2 pass-through authentication agents (in case one server fails).</p>\n<p></p>\n<p>There\'s also an issue with the synchronization server because the last sync time is 4 hours. A sync should run every 30 minutes.</p>\n<p></p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n', slug: 'which-employees-can-authe-yfwzgfxu8', title: 'Which employees can authenticate by using Azure AD? What should you do to remove the warning for pass-through authentication?', type: 'hot-area'},
      test: {answers: {'8a8tdv5yr': {ordyqhjhj: {id: 'ordyqhjhj', isCorrect: false}, qme9decd7: {id: 'qme9decd7', isCorrect: false}, r5mrv1vqy: {id: 'r5mrv1vqy', isCorrect: true}, xvbwrp3vu: {id: 'xvbwrp3vu', isCorrect: false}, z7snw7q4f: {id: 'z7snw7q4f', isCorrect: false}}, aed9qicvy: {fk5w4rx6q: {id: 'fk5w4rx6q', isCorrect: false}, ortxbovr7a: {id: 'ortxbovr7a', isCorrect: false}, 'tqsl-7zjw': {id: 'tqsl-7zjw', isCorrect: true}, ylfxzfsys: {id: 'ylfxzfsys', isCorrect: false}}, ccdlpnbrj: {'9jptshdbm': {id: '9jptshdbm', isCorrect: true}, _vpp_e2lg: {id: '_vpp_e2lg', isCorrect: false}, cmoxolls5: {id: 'cmoxolls5', isCorrect: false}, u3zypljvd: {id: 'u3zypljvd', isCorrect: false}}, coq4hskij: {'7lnz7cd5x': {id: '7lnz7cd5x', isCorrect: false}, '86u-sakxc': {id: '86u-sakxc', isCorrect: false}, '9vlyr6jpz': {id: '9vlyr6jpz', isCorrect: true}, augolcxj8: {id: 'augolcxj8', isCorrect: false}}, jp4z7vr6w: {le0yotabt: {'dv-6xi5ut': {id: 'dv-6xi5ut', isCorrect: false}, id: 'le0yotabt', xdwvpwzjk: {id: 'xdwvpwzjk', isCorrect: true}, xv1x5xb8w: {id: 'xv1x5xb8w', isCorrect: false}}, 'n2-wyjjkm': {id: 'n2-wyjjkm', jr_jkwrfw: {id: 'jr_jkwrfw', isCorrect: false}, xixg9qbkj: {id: 'xixg9qbkj', isCorrect: false}, xml0d51wc: {id: 'xml0d51wc', isCorrect: true}}}, ntx7esnez: {l0d0ff0ct: {'7ajlr_uhs': {id: '7ajlr_uhs', isCorrect: true}, id: 'l0d0ff0ct', mzn1iynbc: {id: 'mzn1iynbc', isCorrect: false}, vrnroa1hh: {id: 'vrnroa1hh', isCorrect: false}}, t1myibjbx: {id: 't1myibjbx', ngt9og1s1: {id: 'ngt9og1s1', isCorrect: true}, swtric6vy: {id: 'swtric6vy', isCorrect: false}, we5jfhdgc: {id: 'we5jfhdgc', isCorrect: false}}}, tots2lcqv: {bn7_tcxzn: {id: 'bn7_tcxzn', isCorrect: false}, je1o6t9ds: {id: 'je1o6t9ds', isCorrect: false}, me4yg4psl: {id: 'me4yg4psl', isCorrect: true}, rabmmiz18: {id: 'rabmmiz18', isCorrect: false}}, yfwzgfxu8: {gdbyecp1b: {'1wtadwmik': {id: '1wtadwmik', isCorrect: false}, id: 'gdbyecp1b', nd6qjhfnd: {id: 'nd6qjhfnd', isCorrect: false}, zhmxdwvhl: {id: 'zhmxdwvhl', isCorrect: true}}, zxoma6vc5: {'-t-rcn-fo': {id: '-t-rcn-fo', isCorrect: false}, id: 'zxoma6vc5', kuqd8vqiv: {id: 'kuqd8vqiv', isCorrect: true}, 'tva0md3-h': {id: 'tva0md3-h', isCorrect: false}, z2rbhe7oo: {id: 'z2rbhe7oo', isCorrect: false}}}, yogt2ep5x: {fyokqryrr: {epvzoj9gj: {id: 'epvzoj9gj', isCorrect: false}, id: 'fyokqryrr', t61jygepm: {id: 't61jygepm', isCorrect: false}, vw1sjoqcq: {id: 'vw1sjoqcq', isCorrect: true}}, jzjwn5hqw: {'-phlif_24': {id: '-phlif_24', isCorrect: false}, id: 'jzjwn5hqw', jgowsdkg4: {id: 'jgowsdkg4', isCorrect: true}, 'kdq2ue-hj': {id: 'kdq2ue-hj', isCorrect: false}}}}, datePublished: '2022/9/20', description: 'Perfect for anyone who wants to ensure they know everything they need to know about AD Connect. With a series of questions that cover everything you need to know about AD Connect, this practice test is the perfect way to prepare for the real thing. So why wait? Take our MS-500 practice test today and put yourself one step closer to passing the MS-500 Microsoft 365 Security Administration certificate!', featuredImage: 'https://i.ibb.co/nDBr7ps/ad-connect-status.png', id: 'lg2mr5_z0', images: ['https://i.ibb.co/nDBr7ps/ad-connect-status.png'], publish: true, questions: {'8a8tdv5yr': {answerOptions: {ordyqhjhj: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'd4qg7', text: 'Source Anchor settings', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Source Anchor settings</p>\n', id: 'ordyqhjhj'}, qme9decd7: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8n605', text: 'Azure AD app and attribute filtering settings', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Azure AD app and attribute filtering settings</p>\n', id: 'qme9decd7'}, r5mrv1vqy: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'dlsmg', text: 'Password Hash Synchronization settings', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Password Hash Synchronization settings</p>\n', id: 'r5mrv1vqy'}, xvbwrp3vu: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '2qjeb', text: 'attribute filtering settings', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>attribute filtering settings</p>\n', id: 'xvbwrp3vu'}, z7snw7q4f: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ds8d9', text: 'User principal name settings', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>User principal name settings</p>\n', id: 'z7snw7q4f'}}, answerText: 'Password Hash Synchronization settings.', id: '8a8tdv5yr', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'iriq', text: 'Your organization has a Microsoft 365 tenant with Microsoft 365 E5 licenses. Your organization currently uses AD Connect to sync your user accounts from the on-premises AD to Microsoft 365. Your organization is also using Active Directory Federation Services (AD FS) to federate between the on-premises Active Directory (AD) and the Microsoft 365 tenant. Azure AD Connect has the following settings:', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 1, offset: 0}], inlineStyleRanges: [], key: 'd6o7p', text: 'ðŸ“·', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'aotvn', text: 'Your manager has asked if you can update the configuration so leaked credentials detection can run properly', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'eq3gs', text: 'What attribute do you edit?', type: 'unstyled'}], entityMap: {0: {data: {alt: 'AD Connect settings', height: 430, src: 'https://i.ibb.co/Y87wd88/AD-Connect-Settings.png', width: 600}, mutability: 'IMMUTABLE', type: 'IMAGE'}}}, questionHtml: '<p>Your organization has a Microsoft 365 tenant with Microsoft 365 E5 licenses. Your organization currently uses AD Connect to sync your user accounts from the on-premises AD to Microsoft 365. Your organization is also using Active Directory Federation Services (AD FS) to federate between the on-premises Active Directory (AD) and the Microsoft 365 tenant. Azure AD Connect has the following settings:</p>\n<p><img src="https://i.ibb.co/Y87wd88/AD-Connect-Settings.png" alt="AD Connect settings" height="430" width="600" style="aspect-ratio: auto 600 / 430; height: auto;" /></p>\n<p>Your manager has asked if you can update the configuration so leaked credentials detection can run properly</p>\n<p>What attribute do you edit?</p>\n', questionText: 'Your organization has a Microsoft 365 tenant with Microsoft 365 E5 licenses. Your organization currently uses AD Connect to sync your user accounts from the on-premises AD to Microsoft 365. Your organization is also using Active Directory Federation Services (AD FS) to federate between the on-premises Active Directory (AD) and the Microsoft 365 tenant. Azure AD Connect has the following settings: ðŸ“· Your manager has asked if you can update the configuration so leaked credentials detection can run properly What attribute do you edit?', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '4h32i', text: 'Leaked credentials detection can only work if the password hash is synced/stored in Microsoft 365.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8dkca', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: 'as43f', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8ksm3', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 139, offset: 0}], inlineStyleRanges: [], key: '8fa1t', text: 'https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/concept-identity-protection-risks#password-hash-synchronization', type: 'unstyled'}], entityMap: {0: {data: {url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}, 1: {data: {url: 'https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/concept-identity-protection-risks#password-hash-synchronization'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Leaked credentials detection can only work if the password hash is synced/stored in Microsoft 365.</p>\n<p></p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n<p></p>\n<p><a href="https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/concept-identity-protection-risks#password-hash-synchronization" target="_self">https://docs.microsoft.com/en-us/azure/active-directory/identity-protection/concept-identity-protection-risks#password-hash-synchronization</a></p>\n', slug: 'what-attribute-do-you-edi-8a8tdv5yr', title: 'What attribute do you edit to configure leaked credentials detection', type: 'multiple-choice'}, aed9qicvy: {answerOptions: {fk5w4rx6q: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '3epqk', text: 'IdFix', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>IdFix</p>\n', id: 'fk5w4rx6q'}, ortxbovr7a: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'brgan', text: 'Synchronization Rules Editor', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Synchronization Rules Editor</p>\n', id: 'ortxbovr7a'}, 'tqsl-7zjw': {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '9ilji', text: 'Synchronization Service Manager', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Synchronization Service Manager</p>\n', id: 'tqsl-7zjw'}, ylfxzfsys: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'cu933', text: 'Azure AD Connect wizard', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Azure AD Connect wizard</p>\n', id: 'ylfxzfsys'}}, id: 'aed9qicvy', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'cm3nn', text: 'The network contains an Active Directory forest named gitbit.org. GitBit has a hybrid Microsoft Azure Active Directory (Azure AD) environment.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'e37ec', text: 'The company maintains some on-premises servers for specific applications, but most end-user applications are provided by a Microsoft 365 E5 subscription.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ds2c9', text: 'GitBit identifies the following issues:', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '7hud2', text: 'Since last Friday, the IT team has been receiving automated email messages that contain "Unhealthy Identity Synchronization Notification" in the subject line.', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'flvmi', text: 'Several users recently opened email attachments that contained malware. The process to remove the malware was time-consuming.', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '2mulr', text: 'You need to resolve the issue that generates the automated email messages to the IT team.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '88edu', text: 'Which tool should you run first?', type: 'unstyled'}], entityMap: {}}, questionHtml: '<p>The network contains an Active Directory forest named gitbit.org. GitBit has a hybrid Microsoft Azure Active Directory (Azure AD) environment.</p>\n<p>The company maintains some on-premises servers for specific applications, but most end-user applications are provided by a Microsoft 365 E5 subscription.</p>\n<p>GitBit identifies the following issues:</p>\n<ul>\n<li>Since last Friday, the IT team has been receiving automated email messages that contain "Unhealthy Identity Synchronization Notification" in the subject line.</li>\n<li>Several users recently opened email attachments that contained malware. The process to remove the malware was time-consuming.</li>\n</ul>\n<p>You need to resolve the issue that generates the automated email messages to the IT team.</p>\n<p>Which tool should you run first?</p>\n', questionText: 'The network contains an Active Directory forest named gitbit.org. GitBit has a hybrid Microsoft Azure Active Directory (Azure AD) environment. The company maintains some on-premises servers for specific applications, but most end-user applications are provided by a Microsoft 365 E5 subscription. GitBit identifies the following issues: Since last Friday, the IT team has been receiving automated email messages that contain "Unhealthy Identity Synchronization Notification" in the subject line. Several users recently opened email attachments that contained malware. The process to remove the malware was time-consuming. You need to resolve the issue that generates the automated email messages to the IT team. Which tool should you run first?', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'agd06', text: 'To review the error in more detail log on to the server that has the AD Connect service running then open the Synchronization Service Manager application. From there you\'ll see one of the profiles with a status of Completed-export-error. Click on it. Then click the error (in the bottom right corner. Click Detail. You can also click the CN=GUID to view the account that changed and what attributes have changed.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: 'ajpeo', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}], entityMap: {0: {data: {href: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', target: '_blank', url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>To review the error in more detail log on to the server that has the AD Connect service running then open the Synchronization Service Manager application. From there you\'ll see one of the profiles with a status of Completed-export-error. Click on it. Then click the error (in the bottom right corner. Click Detail. You can also click the CN=GUID to view the account that changed and what attributes have changed.</p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n', slug: 'resolve-the-issue-that-ge-aed9qicvy', title: 'Resolve the issue that generates the automated email messages to the IT team.', type: 'multiple-choice'}, ccdlpnbrj: {answerOptions: {'9jptshdbm': {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8516k', text: 'From the Azure AD admin center, create a new certificate.', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>From the Azure AD admin center, create a new certificate.</p>\n', id: '9jptshdbm'}, _vpp_e2lg: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'fhbsd', text: 'From the Azure AD admin center, enable Application Proxy.', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>From the Azure AD admin center, enable Application Proxy.</p>\n', id: '_vpp_e2lg'}, cmoxolls5: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'epkq5', text: 'Configure authentication methods in the Azure AD admin center.', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Configure authentication methods in the Azure AD admin center.</p>\n', id: 'cmoxolls5'}, u3zypljvd: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'bs0v9', text: 'Create a Dynamic Access Control policy in the Azure AD admin center.', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Create a Dynamic Access Control policy in the Azure AD admin center.</p>\n', id: 'u3zypljvd'}}, answerText: 'From the Azure AD admin center, create a new certificate.', id: 'ccdlpnbrj', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '7c8e', text: 'Your organization has a Microsoft 365 tenant with AD Connect syncing your on-premises AD to Microsoft 365. All computers are running Windows 10 and are configured to use Microsoft Intune.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'dh8a2', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '1el6c', text: 'You\'ve been tasked with protecting the VPN. Your manager has asked you to require every computer connecting to the VPN is marked as compliant.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '5umfq', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '52mkp', text: 'What do you need to do first?', type: 'unstyled'}], entityMap: {}}, questionHtml: '<p>Your organization has a Microsoft 365 tenant with AD Connect syncing your on-premises AD to Microsoft 365. All computers are running Windows 10 and are configured to use Microsoft Intune.</p>\n<p></p>\n<p>You\'ve been tasked with protecting the VPN. Your manager has asked you to require every computer connecting to the VPN is marked as compliant.</p>\n<p></p>\n<p>What do you need to do first?</p>\n', questionText: 'Your organization has a Microsoft 365 tenant with AD Connect syncing your on-premises AD to Microsoft 365. All computers are running Windows 10 and are configured to use Microsoft Intune. You\'ve been tasked with protecting the VPN. Your manager has asked you to require every computer connecting to the VPN is marked as compliant. What do you need to do first?', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '2et7c', text: 'It\'s not very common so it\'s not included in the documents in this training but the correct steps are: Create a root certificate in Azure AD > Deploy the conditional access root certificate to on-premises AD > Configure the Conditional Access policy in Azure AD > Create an OMA-DM based VPNv2 Profile for Windows 10 devices.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '1u2ue', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 105, offset: 0}], inlineStyleRanges: [], key: 'c2vcd', text: 'https://docs.microsoft.com/en-us/windows-server/remote/remote-access/vpn/ad-ca-vpn-connectivity-windows10', type: 'unstyled'}], entityMap: {0: {data: {url: 'https://docs.microsoft.com/en-us/windows-server/remote/remote-access/vpn/ad-ca-vpn-connectivity-windows10'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>It\'s not very common so it\'s not included in the documents in this training but the correct steps are: Create a root certificate in Azure AD &gt; Deploy the conditional access root certificate to on-premises AD &gt; Configure the Conditional Access policy in Azure AD &gt; Create an OMA-DM based VPNv2 Profile for Windows 10 devices.</p>\n<p></p>\n<p><a href="https://docs.microsoft.com/en-us/windows-server/remote/remote-access/vpn/ad-ca-vpn-connectivity-windows10" target="_self">https://docs.microsoft.com/en-us/windows-server/remote/remote-access/vpn/ad-ca-vpn-connectivity-windows10</a></p>\n', slug: 'youve-been-tasked-with-pr-ccdlpnbrj', title: 'You\'ve been tasked with protecting the VPN. What do you need to do first?', type: 'multiple-choice'}, coq4hskij: {answerOptions: {'7lnz7cd5x': {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'aqiuc', text: 'System', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>System</p>\n', id: '7lnz7cd5x'}, '86u-sakxc': {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'cl1sc', text: 'Security', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Security</p>\n', id: '86u-sakxc'}, '9vlyr6jpz': {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'apbq8', text: 'Application', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Application</p>\n', id: '9vlyr6jpz'}, augolcxj8: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '65o1c', text: 'Application and Services Logs/Microsoft/Windows/Security-Adminless', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Application and Services Logs/Microsoft/Windows/Security-Adminless</p>\n', id: 'augolcxj8'}}, answerText: 'Application.', id: 'coq4hskij', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '84hee', text: 'Your organization has an on-premises Active Directory domain named gitbit.org', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'cjnsv', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ad2aj', text: 'Your organization has installed Azure AD Connect on a server to sync your on-premises AD to Microsoft 365.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'f3atd', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '4ejju', text: 'There\'s an error in the sync. You\'ve been tasked with finding and resolving the error. You need to view Azure AD Connect events.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8gj5', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '4s2m0', text: 'What event logs do you use?', type: 'unstyled'}], entityMap: {}}, questionHtml: '<p>Your organization has an on-premises Active Directory domain named gitbit.org</p>\n<p></p>\n<p>Your organization has installed Azure AD Connect on a server to sync your on-premises AD to Microsoft 365.</p>\n<p></p>\n<p>There\'s an error in the sync. You\'ve been tasked with finding and resolving the error. You need to view Azure AD Connect events.</p>\n<p></p>\n<p>What event logs do you use?</p>\n', questionText: 'Your organization has an on-premises Active Directory domain named gitbit.org Your organization has installed Azure AD Connect on a server to sync your on-premises AD to Microsoft 365. There\'s an error in the sync. You\'ve been tasked with finding and resolving the error. You need to view Azure AD Connect events. What event logs do you use?', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '55qba', text: 'Troubleshooting AD Connect can be a bit complicated Because there are four places that you may need to check to view the errors (although the data is usually redundant)', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'eip5c', text: 'Directory Sync status in the Microsoft 365 admin center.', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '46kjg', text: 'Sync errors in the Azure AD admin center (found under Azure Active Directory Connect health)', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '694ir', text: 'The synchronization service app on the AD Connect server', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'e5hq7', text: 'The application event logs on the AD Connect server', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: '3e60r', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 93, offset: 0}], inlineStyleRanges: [], key: 'e8hec', text: 'https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance', type: 'unstyled'}], entityMap: {0: {data: {href: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', target: '_blank', url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}, 1: {data: {href: 'https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance', target: '_blank', url: 'https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Troubleshooting AD Connect can be a bit complicated Because there are four places that you may need to check to view the errors (although the data is usually redundant)</p>\n<ul>\n<li>Directory Sync status in the Microsoft 365 admin center.</li>\n<li>Sync errors in the Azure AD admin center (found under Azure Active Directory Connect health)</li>\n<li>The synchronization service app on the AD Connect server</li>\n<li>The application event logs on the AD Connect server</li>\n</ul>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n<p><a href="https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance" target="_self">https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance</a></p>\n', slug: 'what-event-logs-do-you-us-coq4hskij', title: 'What event logs do you use to troubleshoot AD Connect?', type: 'multiple-choice'}, jp4z7vr6w: {answerOptions: {le0yotabt: {answerHtml: '', answers: {'dv-6xi5ut': {id: 'dv-6xi5ut', text: 'the password will be synced to Active Directory'}, xdwvpwzjk: {id: 'xdwvpwzjk', text: 'the password will be overwritten'}, xv1x5xb8w: {id: 'xv1x5xb8w', text: 'the password will be subject to the Active Directory password policy'}}, id: 'le0yotabt', text: 'If you reset a password in Azure AD of a synced user,'}, 'n2-wyjjkm': {answerHtml: '', answers: {jr_jkwrfw: {id: 'jr_jkwrfw', text: 'an object will be provisioned in the computers container'}, xixg9qbkj: {id: 'xixg9qbkj', text: 'the device object in Azure will be deleted during synchronization'}, xml0d51wc: {id: 'xml0d51wc', text: 'an object will be provisioned in the RegisteredDevices container'}}, id: 'n2-wyjjkm', text: 'If you join a computer to Azure AD,'}}, id: 'jp4z7vr6w', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'bid2m', text: 'You configure Microsoft Azure Active Directory (Azure AD) Connect as shown in the following exhibit.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 1, offset: 0}], inlineStyleRanges: [], key: '2k1jj', text: 'ðŸ“·', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8d2j6', text: 'Select the response to complete the sentence correctly.', type: 'unstyled'}], entityMap: {0: {data: {alt: 'AD Connect Settings', height: 622, src: 'https://i.ibb.co/WGJ169y/AD-Connect-Settings2.png', width: 872}, mutability: 'IMMUTABLE', type: 'IMAGE'}}}, questionHtml: '<p>You configure Microsoft Azure Active Directory (Azure AD) Connect as shown in the following exhibit.</p>\n<p><img src="https://i.ibb.co/WGJ169y/AD-Connect-Settings2.png" alt="AD Connect Settings" height="622" width="872" style="aspect-ratio: auto 872 / 622; height: auto;" /></p>\n<p>Select the response to complete the sentence correctly.</p>\n', questionText: 'You configure Microsoft Azure Active Directory (Azure AD) Connect as shown in the following exhibit. ðŸ“· Select the response to complete the sentence correctly.', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '2erte', text: 'Since password writeback is disabled any time you reset a password in Azure AD of a synced user the password will be overwritten by the on-premises password during the next password sync.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'cuase', text: 'Since Device Writeback is enabled any Azure AD joined computer will automatically be written back to the RegisteredDevices OU in on-premises AD.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: 'cgu8q', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 94, offset: 0}], inlineStyleRanges: [], key: 'ffcbj', text: 'https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback', type: 'unstyled'}], entityMap: {0: {data: {href: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', target: '_blank', url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}, 1: {data: {href: 'https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback', target: '_blank', url: 'https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Since password writeback is disabled any time you reset a password in Azure AD of a synced user the password will be overwritten by the on-premises password during the next password sync.</p>\n<p>Since Device Writeback is enabled any Azure AD joined computer will automatically be written back to the RegisteredDevices OU in on-premises AD.</p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n<p><a href="https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback" target="_self">https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback</a></p>\n', slug: 'explain-the-ad-connect-se-jp4z7vr6w', title: 'Explain the AD Connect settings', type: 'hot-area'}, ntx7esnez: {answerOptions: {l0d0ff0ct: {answerHtml: '', answers: {'7ajlr_uhs': {id: '7ajlr_uhs', text: 'overwritten'}, mzn1iynbc: {id: 'mzn1iynbc', text: 'synced to Active Directory'}, vrnroa1hh: {id: 'vrnroa1hh', text: 'subject to the Active Directory password policy'}}, id: 'l0d0ff0ct', text: 'If you reset a password in Azure AD of a synced user, the password will be'}, t1myibjbx: {answerHtml: '', answers: {ngt9og1s1: {id: 'ngt9og1s1', text: 'an object will be provisioned in the RegisteredDevices container'}, swtric6vy: {id: 'swtric6vy', text: 'the device object in Azure will be deleted during synchronization'}, we5jfhdgc: {id: 'we5jfhdgc', text: 'an object will be provisioned in the computers container'}}, id: 't1myibjbx', text: 'If you join a computer to Azure AD,'}}, answerText: 'an object will be provisioned in the RegisteredDevices container. overwritten.', id: 'ntx7esnez', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '6smkd', text: 'You configure Microsoft Azure Active Directory (Azure AD) Connect as shown in the following exhibit.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 1, offset: 0}], inlineStyleRanges: [], key: 'eef6k', text: 'ðŸ“·', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'adelh', text: 'Select the option that will properly complete the following sentences', type: 'unstyled'}], entityMap: {0: {data: {alt: 'AD Connect Settings', height: 622, src: 'https://i.ibb.co/WGJ169y/AD-Connect-Settings2.png', width: 872}, mutability: 'IMMUTABLE', type: 'IMAGE'}}}, questionHtml: '<p>You configure Microsoft Azure Active Directory (Azure AD) Connect as shown in the following exhibit.</p>\n<p><img src="https://i.ibb.co/WGJ169y/AD-Connect-Settings2.png" alt="AD Connect Settings" height="622" width="872" style="aspect-ratio: auto 872 / 622; height: auto;" /></p>\n<p>Select the option that will properly complete the following sentences</p>\n', questionText: 'You configure Microsoft Azure Active Directory (Azure AD) Connect as shown in the following exhibit. ðŸ“· Select the option that will properly complete the following sentences', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '562fk', text: 'Since password writeback is disabled any time you reset a password in Azure AD of a synced user the password will be overwritten by the on-premises password during the next password sync.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '7lpqh', text: 'Since Device Writeback is enabled any Azure AD joined computer will automatically be written back to the RegisteredDevices OU in on-premises AD.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: 'eifjp', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 94, offset: 0}], inlineStyleRanges: [], key: '459gj', text: 'https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback', type: 'unstyled'}], entityMap: {0: {data: {href: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', target: '_blank', url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}, 1: {data: {href: 'https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback', target: '_blank', url: 'https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Since password writeback is disabled any time you reset a password in Azure AD of a synced user the password will be overwritten by the on-premises password during the next password sync.</p>\n<p>Since Device Writeback is enabled any Azure AD joined computer will automatically be written back to the RegisteredDevices OU in on-premises AD.</p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n<p><a href="https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback" target="_self">https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-device-writeback</a></p>\n', slug: 'what-is-the-effect-of-the-ntx7esnez', title: 'What is the effect of the AD Connect synchronization settings?', type: 'hot-area'}, tots2lcqv: {answerOptions: {bn7_tcxzn: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'a1u4r', text: 'Security event log', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Security event log</p>\n', id: 'bn7_tcxzn'}, je1o6t9ds: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '5lr0h', text: 'Directory Service event logs', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Directory Service event logs</p>\n', id: 'je1o6t9ds'}, me4yg4psl: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ec5ni', text: 'Application event log', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>Application event log</p>\n', id: 'me4yg4psl'}, rabmmiz18: {answer: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '2rbh7', text: 'System event log', type: 'unstyled'}], entityMap: {}}, answerHtml: '<p>System event log</p>\n', id: 'rabmmiz18'}}, id: 'tots2lcqv', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'rbvj', text: 'Your organization has an Active Directory domain named gitbit.org. You\'ve installed Azure AD Connect on ServerA which is a server running Windows 2016.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8hmh2', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'b9rje', text: 'There\'s an error syncing user accounts from your on-premises AD to Microsoft 365.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'aqec', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '1cvc1', text: 'You\'ve been tasked with resolving the error. To start, you RDP to ServerA and open the Directory Service event logs.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'agupt', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8pkc2', text: 'What location can you use to troubleshoot the AD Connect sync errors?', type: 'unstyled'}], entityMap: {}}, questionHtml: '<p>Your organization has an Active Directory domain named gitbit.org. You\'ve installed Azure AD Connect on ServerA which is a server running Windows 2016.</p>\n<p></p>\n<p>There\'s an error syncing user accounts from your on-premises AD to Microsoft 365.</p>\n<p></p>\n<p>You\'ve been tasked with resolving the error. To start, you RDP to ServerA and open the Directory Service event logs.</p>\n<p></p>\n<p>What location can you use to troubleshoot the AD Connect sync errors?</p>\n', questionText: 'Your organization has an Active Directory domain named gitbit.org. You\'ve installed Azure AD Connect on ServerA which is a server running Windows 2016. There\'s an error syncing user accounts from your on-premises AD to Microsoft 365. You\'ve been tasked with resolving the error. To start, you RDP to ServerA and open the Directory Service event logs. What location can you use to troubleshoot the AD Connect sync errors?', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'bjddh', text: 'Troubleshooting AD Connect cannot be performed from the Directory Service event logs. You\'ll need to access the Windows Application event logs.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '88b4s', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: 'aohob', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8l97l', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 93, offset: 0}], inlineStyleRanges: [], key: '3nv26', text: 'https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance', type: 'unstyled'}], entityMap: {0: {data: {url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}, 1: {data: {url: 'https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Troubleshooting AD Connect cannot be performed from the Directory Service event logs. You\'ll need to access the Windows Application event logs.</p>\n<p></p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n<p></p>\n<p><a href="https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance" target="_self">https://support.pingidentity.com/s/article/PingOne-How-to-troubleshoot-an-AD-Connect-Instance</a></p>\n', slug: 'what-location-can-you-use-tots2lcqv', title: 'What location can you use to troubleshoot the AD Connect sync errors?', type: 'multiple-choice'}, yfwzgfxu8: {answerOptions: {gdbyecp1b: {answerHtml: '', answers: {'1wtadwmik': {id: '1wtadwmik', text: 'Only employees who have a synced on-premises account'}, nd6qjhfnd: {id: 'nd6qjhfnd', text: 'Only employees who have an Azure AD user account'}, zhmxdwvhl: {id: 'zhmxdwvhl', text: 'Employees who have an Azure AD user account or a synced on-premises account'}}, id: 'gdbyecp1b', text: 'Which employees can authenticate by using Azure AD?'}, zxoma6vc5: {answerHtml: '', answers: {'-t-rcn-fo': {id: '-t-rcn-fo', text: 'Fix the synchronization server and install Azure AD Connect in staging mode'}, kuqd8vqiv: {id: 'kuqd8vqiv', text: 'Fix the synchronization server and install an additional authentication agent'}, 'tva0md3-h': {id: 'tva0md3-h', text: 'Install Azure AD Connect in staging mode and run the Start-ADSyncSyncCycle cmdlet'}, z2rbhe7oo: {id: 'z2rbhe7oo', text: 'Install an additional authentication agent and run the Start-ADSyncSyncCycle cmdlet'}}, id: 'zxoma6vc5', text: 'What should you do to remove the warning for pass-through authentication?'}}, answerText: 'Fix the synchronization server and install an additional authentication agent. Employees who have an Azure AD user account or a synced on-premises account.', id: 'yfwzgfxu8', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'be9h2', text: 'Your network contains an on-premises Active Directory domain that syncs to Azure Active Directory (Azure AD) as shown in the following exhibit.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 1, offset: 0}], inlineStyleRanges: [], key: '9is0e', text: 'ðŸ“·', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '5rqni', text: 'The synchronization schedule is configured as shown in the following exhibit.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 1, length: 1, offset: 0}], inlineStyleRanges: [], key: '670vt', text: 'ðŸ“·', type: 'unstyled'}], entityMap: {0: {data: {alt: 'AD Connect Setup', height: 418, src: 'https://i.ibb.co/VpsjVFh/ad-connect-setup.png', width: 651}, mutability: 'IMMUTABLE', type: 'IMAGE'}, 1: {data: {alt: 'AD Connect Scheduler status', height: 298, src: 'https://i.ibb.co/CWcS1NP/ad-connect-status.png', width: 600}, mutability: 'IMMUTABLE', type: 'IMAGE'}}}, questionHtml: '<p>Your network contains an on-premises Active Directory domain that syncs to Azure Active Directory (Azure AD) as shown in the following exhibit.</p>\n<p><img src="https://i.ibb.co/VpsjVFh/ad-connect-setup.png" alt="AD Connect Setup" height="418" width="651" style="aspect-ratio: auto 651 / 418; height: auto;" /></p>\n<p>The synchronization schedule is configured as shown in the following exhibit.</p>\n<p><img src="https://i.ibb.co/CWcS1NP/ad-connect-status.png" alt="AD Connect Scheduler status" height="298" width="600" style="aspect-ratio: auto 600 / 298; height: auto;" /></p>\n', questionText: 'Your network contains an on-premises Active Directory domain that syncs to Azure Active Directory (Azure AD) as shown in the following exhibit. ðŸ“· The synchronization schedule is configured as shown in the following exhibit. ðŸ“·', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ajf1d', text: 'Users that have an Azure AD user account or a synced on-premises account can both authenticate. (Pass-through authentication does not affect cloud-only accounts)', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '1g4md', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'ducbm', text: 'The yellow exclamation mark is Microsoft warning you that you should have at least 2 pass-through authentication agents (in case one server fails).', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '8j34r', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'b8cp1', text: 'There\'s also an issue with the synchronization server because the last sync time is 4 hours. A sync should run every 30 minutes.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'em8bl', text: '', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: '9meg1', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}], entityMap: {0: {data: {url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>Users that have an Azure AD user account or a synced on-premises account can both authenticate. (Pass-through authentication does not affect cloud-only accounts)</p>\n<p></p>\n<p>The yellow exclamation mark is Microsoft warning you that you should have at least 2 pass-through authentication agents (in case one server fails).</p>\n<p></p>\n<p>There\'s also an issue with the synchronization server because the last sync time is 4 hours. A sync should run every 30 minutes.</p>\n<p></p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n', slug: 'which-employees-can-authe-yfwzgfxu8', title: 'Which employees can authenticate by using Azure AD? What should you do to remove the warning for pass-through authentication?', type: 'hot-area'}, yogt2ep5x: {answerOptions: {fyokqryrr: {answerHtml: '', answers: {epvzoj9gj: {id: 'epvzoj9gj', text: 'Password Synchronization with single-sign on'}, t61jygepm: {id: 't61jygepm', text: 'Federation with Active Directory Federation Services (AD FS)'}, vw1sjoqcq: {id: 'vw1sjoqcq', text: 'Pass-through authentication with single-sign on'}}, id: 'fyokqryrr', text: 'User sign-in settings'}, jzjwn5hqw: {answerHtml: '', answers: {'-phlif_24': {id: '-phlif_24', text: 'Disable Device writeback'}, jgowsdkg4: {id: 'jgowsdkg4', text: 'Hybrid Azure AD Join'}, 'kdq2ue-hj': {id: 'kdq2ue-hj', text: 'Enable Device writeback'}}, id: 'jzjwn5hqw', text: 'Device options'}}, answerText: 'Hybrid Azure AD Join. Pass-through authentication with single-sign on.', id: 'yogt2ep5x', images: [], question: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '2sq9o', text: 'Your organization has a Microsoft 365 tenant and an on-premises Active Directory (AD) domain. Your organization has installed AD Connect but hasn\'t enabled the syncing of your on-premises AD to Microsoft 365. Your organization is currently using the default authentication settings.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'd0o7g', text: 'Your manager has asked you to perform the following', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'c7vdu', text: 'Have all domain joined computers registered in Azure AD.', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'f5pjh', text: 'Configure Microsoft 365 to lock out any user that\'s currently locked out of the on-premises AD.', type: 'unordered-list-item'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: 'b09aj', text: 'What two settings will you need to configure to meet the goals listed above?', type: 'unstyled'}], entityMap: {}}, questionHtml: '<p>Your organization has a Microsoft 365 tenant and an on-premises Active Directory (AD) domain. Your organization has installed AD Connect but hasn\'t enabled the syncing of your on-premises AD to Microsoft 365. Your organization is currently using the default authentication settings.</p>\n<p>Your manager has asked you to perform the following</p>\n<ul>\n<li>Have all domain joined computers registered in Azure AD.</li>\n<li>Configure Microsoft 365 to lock out any user that\'s currently locked out of the on-premises AD.</li>\n</ul>\n<p>What two settings will you need to configure to meet the goals listed above?</p>\n', questionText: 'Your organization has a Microsoft 365 tenant and an on-premises Active Directory (AD) domain. Your organization has installed AD Connect but hasn\'t enabled the syncing of your on-premises AD to Microsoft 365. Your organization is currently using the default authentication settings. Your manager has asked you to perform the following Have all domain joined computers registered in Azure AD. Configure Microsoft 365 to lock out any user that\'s currently locked out of the on-premises AD. What two settings will you need to configure to meet the goals listed above?', references: {blocks: [{data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '5c0f2', text: 'To ensure that all domain-joined computers are registered to Azure AD Hybrid Azure AD Join would need to be configured.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [], inlineStyleRanges: [], key: '3plp1', text: 'To prevent users locked out of Active Directory from signing in to Azure AD and Active Directory pass-through authentication would need to be configured.', type: 'unstyled'}, {data: {}, depth: 0, entityRanges: [{key: 0, length: 69, offset: 0}], inlineStyleRanges: [], key: '2uc0v', text: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', type: 'unstyled'}], entityMap: {0: {data: {href: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P', url: 'https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P'}, mutability: 'MUTABLE', type: 'LINK'}}}, referencesHtml: '<p>To ensure that all domain-joined computers are registered to Azure AD Hybrid Azure AD Join would need to be configured.</p>\n<p>To prevent users locked out of Active Directory from signing in to Azure AD and Active Directory pass-through authentication would need to be configured.</p>\n<p><a href="https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P" target="_self">https://www.gitbit.org/course/ms-500/learn/Whats-AD-Connect-ky5W0Lz5P</a></p>\n', slug: 'what-user-signin-settings-yogt2ep5x', title: 'What User sign-in settings and Device options do you need to configure?', type: 'hot-area'}}, sectionId: 'AFV_acckJ', slug: 'adconnect-lg2mr5_z0', title: 'AD Connect', type: 'test'},
      questionsShown: false
    }

    if (isBrowser()) {
      ((a) => {
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4))) this.state.bidvHeight = '691px'
      })(navigator.userAgent||navigator.vendor||window.opera)
    }

    this.state.userAcct = {tests: {
      [this.state.test.id]: {
        [this.state.question.id]: {answers: {}}
      }
    }}

    this.state.questionIdx = Object.keys(this.state.test.questions).indexOf(this.state.question.id)
    this.state.previousQuestionSlug = this.state.questionIdx > 0 ? Object.values(this.state.test.questions)[this.state.questionIdx-1].slug : ''
    this.state.nextQuestionSlug = Object.values(this.state.test.questions).length-1 == this.state.questionIdx ? '' : Object.values(this.state.test.questions)[this.state.questionIdx+1].slug

    this.state.jsonLd = {
      datePublished: this.state.test.datePublished,
      keywords: [
        'Microsoft',
        'Microsoft 365',
        'Office 365',
        'MS-500',
        'Microsoft 365 Security Administration'
      ],
      mainEntity: {
        '@type': 'Question',
        name: this.state.question.title,
        text: this.state.question.questionText,
        answerCount: this.state.test.answers ? Object.keys(this.state.test.answers[this.state.question.id]).length : 0,
        dateCreated: this.state.test.datePublished,
        author: {
          '@type': 'Person',
          name: 'John Gruber',
          url: 'https://twitter.com/gruberjl'
        }
      }
    }

    if (this.state.test.answers) {
      this.state.jsonLd.mainEntity.acceptedAnswer = {
        '@type': 'Answer',
        url: `https://www.gitbit.org/course/ms-500/test/${this.state.test.slug}/question/${this.state.question.slug}`,
        author: {
          type: 'Person',
          name: 'John Gruber',
          url: 'https://twitter.com/gruberjl'
        },
        upvoteCount: 1,
        dateCreated: this.state.test.datePublished
      }

      this.state.jsonLd.mainEntity.acceptedAnswer.text = 'None'
    }
  }

  componentDidMount() {
    if (isBrowser()) {
      this.onAuthStateChangedListener = onAuthStateChanged(this.setUid)
      window.addEventListener('beforeunload', this.beforeUnload);

      ((d) => {
        const params =
        {
          bvwidgetid: 'ntv_2077339',
          bvlinksownid: 2077339,
          rows: 1,
          cols: 2,
          textpos: 'below',
          imagewidth: 325,
          mobilecols: 1,
          cb: (new Date()).getTime()
        }
        params.bvwidgetid = `ntv_2077339${ params.cb}`
        d.getElementById('ntv_2077339').id = params.bvwidgetid
        const qs = Object.keys(params).reduce((a, k)=> {
          a.push(`${k }=${ encodeURIComponent(params[k])}`); return a
        }, []).join(String.fromCharCode(38))
        const s = d.createElement('script'); s.type='text/javascript'; s.async=true
        const p = 'https:' == document.location.protocol ? 'https' : 'http'
        s.src = `${p }://cdn.hyperpromote.com/bidvertiser/tags/active/bdvws.js?${ qs}`
        d.getElementById(params.bvwidgetid).appendChild(s)
      })(document)

      const script = document.createElement('script')
      script.src = '//display.jalewaads.com/display/items.php?17966&5820&320&50&4&0&0'
      script.dataset.cfasync=false
      script.async = true
      script.type = 'text/javascript'
      document.querySelector('#adcontainer01').appendChild(script)
    }
  }

  componentWillUnmount() {
    this.onAuthStateChangedListener()
    window.removeEventListener('beforeunload', this.beforeUnload)
  }

  setUid(user) {
    if (user) {
      this.setState({
        uid: user.uid
      })

      getDoc('courses/MS-500/users', user.uid).then((userAcct) => {
        if (!userAcct.tests)
          userAcct.tests = {}

        if (!userAcct.tests[this.state.test.id])
          userAcct.tests[this.state.test.id] = {}

        if (!userAcct.tests[this.state.test.id][this.state.question.id]) {
          userAcct.tests[this.state.test.id][this.state.question.id] = {
            id: this.state.question.id,
            answers: {}
          }
        }

        this.setState({userAcct})
      })
    }
  }

  toggleEndExam() {
    const endExamShown = !this.state.endExamShown
    this.setState({endExamShown})
  }

  toggleShowAnswer() {
    const answerShown = !this.state.answerShown
    this.setState({answerShown})
  }

  toggleQuestionList() {
    const showQuestionList = !this.state.showQuestionList
    this.setState({showQuestionList})
  }

  gotoQuestion(question) {
    return () => {
      this.navigateTo(`/course/ms-500/test/${this.state.test.slug}/question/${question.slug}`)()
    }
  }

  setAnswer(answers) {
    const userAcct = clone(this.state.userAcct)
    userAcct.tests[this.state.test.id][this.state.question.id].answers = answers

    this.setState({userAcct, unsavedChanges: true})
    if (!this.debounceSave)
      this.debounceSave = debounce(this.save, 5000)

    this.debounceSave()
  }

  beforeUnload() {
    if (this.state.unsavedChanges) {
      const s = 'You have unsaved changes. Really leave?'
      this.save()

      event = event || window.event // eslint-disable-line no-global-assign
      if (event)
        event.returnValue = s

      return s
    }
  }

  save() {
    if (this.state.uid) {
      return saveDoc(`courses/MS-500/users`, this.state.userAcct, false).then(() => {
        return new Promise((resolve, reject) => {
          this.setState({
            alert: 'Content saved',
            unsavedChanges: false
          }, () => {
            return resolve()
          })

          setTimeout(() => {
            this.setState({alert: ''})
          }, 3000)
        })
      })
    } return new Promise((res) => res())
  }

  endExam() {
    this.navigateTo(`/course/ms-500/test/${this.state.test.slug}/summary`)()
  }

  navigateTo(url) {
    return (ev) => {
      if (this.state.unsavedChanges) {
        if (ev)
          ev.preventDefault()

        this.save().then(() => {
          window.location.href = url
        })
      } else
        window.location.href = url
    }
  }

  render() {
    return (
      <Page jsonLdType={'QAPage'} jsonLd={this.state.jsonLd} title={this.state.question.title} description={this.state.question.questionText}>
        <main>
          <Container>
            <Header uid={this.state.uid} questionIdx={this.state.questionIdx} previousQuestionSlug={this.state.previousQuestionSlug} nextQuestionSlug={this.state.nextQuestionSlug} testSlug={this.state.test.slug} toggleEndExam={this.toggleEndExam} numOfQuestions={Object.values(this.state.test.questions).length} navigateTo={this.navigateTo} />
            <div id="ntv_2077339" style={{height: this.state.bidvHeight, overflow: 'hidden'}} />
            {
              {
                'multiple-choice': <Choice question={this.state.question} setAnswer={this.setAnswer} answers={this.state.userAcct.tests[this.state.test.id][this.state.question.id].answers} testAnswers={this.state.test.answers[this.state.question.id]} showAnswers={this.state.answerShown} />,
                'hot-area': <HotArea question={this.state.question} setAnswer={this.setAnswer} answers={this.state.userAcct.tests[this.state.test.id][this.state.question.id].answers} testAnswers={this.state.test.answers[this.state.question.id]} showAnswers={this.state.answerShown} />,
                'build-list': <BuildList question={this.state.question} setAnswer={this.setAnswer} answers={this.state.userAcct.tests[this.state.test.id][this.state.question.id].answers} testAnswers={this.state.test.answers[this.state.question.id]} showAnswers={this.state.answerShown} />,
                'drag-drop': <DragDrop question={this.state.question} setAnswer={this.setAnswer} answers={this.state.userAcct.tests[this.state.test.id][this.state.question.id].answers} testAnswers={this.state.test.answers[this.state.question.id]} showAnswers={this.state.answerShown} />
              }[this.state.question.type]
            }
            <Grid container>
              <Grid item xs={12} style={{display: this.state.answerShown ? 'block' : 'none'}} >
                <Typography variant="h5" component="h3" gutterBottom>Answer Explanation</Typography>
              </Grid>
              <Grid item xs={12}>
                <div dangerouslySetInnerHTML={{__html: this.state.question.referencesHtml}} style={{display: this.state.answerShown ? 'block' : 'none'}} />
              </Grid>
              <Grid item xs={12}>
                <div id="adcontainer01" style={{height: '50px', overflow: 'hidden'}}><div id="adm-container-17966" /></div>
              </Grid>
            </Grid>
            <Footer uid={this.state.uid} previousQuestionSlug={this.state.previousQuestionSlug} nextQuestionSlug={this.state.nextQuestionSlug} testSlug={this.state.test.slug} toggleEndExam={this.toggleEndExam} toggleShowAnswer={this.toggleShowAnswer} toggleQuestionList={this.toggleQuestionList} navigateTo={this.navigateTo} />
          </Container>

          <Dialog onClose={this.toggleQuestionList} open={this.state.showQuestionList}>
            <DialogTitle>Test Questions</DialogTitle>
            <TableContainer>
              <Table striped bordered hover>
                <TableHead>
                  <TableRow>
                    <TableCell>#</TableCell>
                    <TableCell>Answered</TableCell>
                    <TableCell>Question</TableCell>
                  </TableRow>
                </TableHead>
                <TableBody>
                  { Object.values(this.state.test.questions).map((question, idx) => (
                    <TableRow hover key={idx} onClick={this.gotoQuestion(question)} style={{cursor: 'pointer'}}>
                      <TableCell>{idx+1}</TableCell>
                      <TableCell><Checkbox checked={Object.values(this.state.userAcct.tests[this.state.test.id][this.state.question.id].answers).length > 0} /></TableCell>
                      <TableCell>{question.title}</TableCell>
                    </TableRow>
                  ))}
                </TableBody>
              </Table>
            </TableContainer>
          </Dialog>

          <Dialog onClose={this.toggleEndExam} open={this.state.endExamShown}>
            <DialogTitle>Are you sure?</DialogTitle>
            <DialogContent>
              <DialogContentText>Are you sure you want to end the exam?</DialogContentText>
            </DialogContent>
            <DialogActions>
              <Button variant="contained" onClick={this.endExam}>
                Yes
              </Button>
              <Button variant="outlined" onClick={this.toggleEndExam}>
                No
              </Button>
            </DialogActions>
          </Dialog>
        </main>
        <Snackbar message={this.state.alert} open={this.state.alert !== ''} />
      </Page>
    )
  }
}

export default EditPage
